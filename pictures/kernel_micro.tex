%%
%%
%% kernel_monolithic.tex for  in /doctorat/ece/partenariat/cours/archi_kernel
%%
%% Made by Philippe THIERRY
%% Login   <Philippe THIERRYreseau-libre.net>
%%
%% Started on  Thu Sep 23 14:19:58 2010 Philippe THIERRY
%% Last update Wed Sep 29 14:35:36 2010 Philippe THIERRY
%%

\begin{pdfpic}
\scalebox{0.8}{
\begin{pspicture}(0,0)(15,8)
% first line seems not to be considered by pstricks... strange...
\psline{-}(0,0)(0,0)
% kernel block
\definecolor{KernLow}{rgb}{0,0,0.6}
\psframe[linewidth=0.04cm,linestyle=dashed,fillstyle=solid,fillcolor=KernLow](1,1.8)(14,0)
\definecolor{UserBase}{rgb}{0.7,0.7,0.7}
% background of userspace content
\psframe[linewidth=0.0cm,fillstyle=solid,fillcolor=UserBase](1,1.8)(14,5.5)
%----- base kernel modules
\definecolor{KernModule}{rgb}{0,0,0.4}
\definecolor{KernShadow}{rgb}{0,0,0.1}
% memory module
\psframe[linewidth=0.00cm,fillstyle=solid,fillcolor=KernShadow,framearc=.3](1.6,0.4)(3.6,1.4) % shadow
\psframe[linewidth=0.04cm,fillstyle=solid,fillcolor=KernModule,framearc=.3](1.5,0.5)(3.5,1.5)
\rput(2.5,1){\text \color{white}{memory}}
% IRQ module
\psframe[linewidth=0.00cm,fillstyle=solid,fillcolor=KernShadow,framearc=.3](4.1,0.4)(6.1,1.4) % shadow
\psframe[linewidth=0.04cm,fillstyle=solid,fillcolor=KernModule,framearc=.3](4,0.5)(6,1.5)
\rput(5,1){\text \color{white}{interrupt}}
% sched module
\psframe[linewidth=0.00cm,fillstyle=solid,fillcolor=KernShadow,framearc=.3](6.6,0.4)(8.6,1.4) % shadow
\psframe[linewidth=0.04cm,fillstyle=solid,fillcolor=KernModule,framearc=.3](6.5,0.5)(8.5,1.5)
\rput(7.5,1){\text \color{white}{scheduler}}
% CPU module
\psframe[linewidth=0.00cm,fillstyle=solid,fillcolor=KernShadow,framearc=.3](9.1,0.4)(11.1,1.4) % shadow
\psframe[linewidth=0.04cm,fillstyle=solid,fillcolor=KernModule,framearc=.3](9,0.5)(11,1.5)
\rput(10,1){\text \color{white}{processor}}
% IPC module
\psframe[linewidth=0.00cm,fillstyle=solid,fillcolor=KernShadow,framearc=.3](11.6,0.4)(13.6,1.4) % shadow
\psframe[linewidth=0.04cm,fillstyle=solid,fillcolor=KernModule,framearc=.3](11.5,0.5)(13.5,1.5)
\rput(12.5,1){\text \color{white}{IPC}}
% service/userspace line
\psline[linewidth=0.05cm,linestyle=dashed]{-}(0.5,1.8)(14.5,1.8)
%--- tasks
\definecolor{Library}{rgb}{0,0.3,0}
\definecolor{LibraryShadow}{rgb}{0,0.1,0}
\definecolor{Task}{rgb}{0.3,0,0}
\definecolor{TaskShadow}{rgb}{0.1,0,0}
% first task
\psframe[linewidth=0.0cm,fillstyle=solid,fillcolor=TaskShadow,framearc=.3](1.6,2.1)(3.1,5.1)
\psframe[linewidth=0.04cm,fillstyle=solid,fillcolor=Task,framearc=.3](1.5,2.2)(3,5.2)
\rput{60}(2.25,3.7){\text \color{white}{first task}}
% second task
\psframe[linewidth=0.0cm,fillstyle=solid,fillcolor=TaskShadow,framearc=.3](3.6,2.1)(5.1,5.1)
\psframe[linewidth=0.04cm,fillstyle=solid,fillcolor=Task,framearc=.3](3.5,2.2)(5,5.2)
\rput{60}(4.25,3.7){\text \color{white}{second task}}
% library
\psframe[linewidth=0.0cm,fillstyle=solid,fillcolor=LibraryShadow,framearc=.3](5.6,2.1)(7.1,5.1)
\psframe[linewidth=0.04cm,fillstyle=solid,fillcolor=Library,framearc=.3](5.5,2.2)(7,5.2)
\rput{60}(6.25,3.7){\text \color{white}{service}}
% third task
\psframe[linewidth=0.0cm,fillstyle=solid,fillcolor=TaskShadow,framearc=.3](7.6,2.1)(9.1,5.1)
\psframe[linewidth=0.04cm,fillstyle=solid,fillcolor=Task,framearc=.3](7.5,2.2)(9,5.2)
\rput{60}(8.25,3.7){\text \color{white}{{\it N-1}\textsuperscript{th} task}}
% fourth task
\definecolor{Driver}{rgb}{0.405,0.365,0.10}
\definecolor{DriverShadow}{rgb}{0.202,0.18,0.05}
\psframe[linewidth=0.0cm,fillstyle=solid,fillcolor=TaskShadow,framearc=.3](9.6,2.1)(11.1,5.1)
\psframe[linewidth=0.04cm,fillstyle=solid,fillcolor=Task,framearc=.3](9.5,2.2)(11,5.2)
\rput{60}(10.25,3.7){\text \color{white}{{\it N}\textsuperscript{th} task}}
% driver
\definecolor{Driver}{rgb}{0.405,0.365,0.10}
\definecolor{DriverShadow}{rgb}{0.202,0.18,0.05}
\definecolor{Task}{rgb}{0.3,0,0}
\psframe[linewidth=0.0cm,fillstyle=solid,fillcolor=DriverShadow,framearc=.3](11.6,2.1)(13.1,5.1)
\psframe[linewidth=0.04cm,fillstyle=solid,fillcolor=Driver,framearc=.3](11.5,2.2)(13,5.2)
\rput{60}(12.25,3.7){\text \color{white}{driver}}
% other legends
\rput{90}(14.5,3.7){\text userspace}
\rput{90}(14.5,0.75){\text kernelpace}
\rput{90}(0.6,0.75){\text $\mu$-kernel}
\end{pspicture}
}
\end{pdfpic}
